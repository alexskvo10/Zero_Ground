# Система покупки патронов

## Описание
Добавлена возможность покупать патроны в магазине для пополнения боезапаса оружия.

## Типы патронов

### 1. Bullets 9x18 (Пистолетные)
- **Цена**: $100
- **Количество**: 10 патронов
- **Совместимость**: USP, Glock-18, Five-SeveN, R8 Revolver

### 2. Bullets 5,45x39 (Автоматные)
- **Цена**: $150
- **Количество**: 30 патронов
- **Совместимость**: Galil AR, M4, AK-47

### 3. Bullets 7,62x54 (Снайперские)
- **Цена**: $200
- **Количество**: 5 патронов
- **Совместимость**: M10, AWP, M40

## Правила покупки

1. **Совместимость оружия**: Патроны можно купить только если у игрока есть оружие соответствующего типа
2. **Достаточно денег**: У игрока должно быть достаточно денег для покупки
3. **Автоматическое распределение**: Патроны автоматически добавляются ко всем оружиям соответствующего типа в инвентаре

## Интерфейс магазина

Магазин теперь имеет 4 колонки:
1. **Pistols** - пистолеты
2. **Rifles** - автоматы
3. **Snipers** - снайперские винтовки
4. **Ammo** - патроны (новая колонка)

### Статусы покупки патронов:
- **Can purchase** (зеленый) - можно купить
- **No compatible weapon** (красный) - нет подходящего оружия
- **Insufficient funds** (красный) - недостаточно денег

## Технические изменения

### Новые структуры данных:

```cpp
enum class AmmoType : uint8_t {
    AMMO_9x18 = 0,    // Pistol ammo
    AMMO_5_45x39 = 1, // Rifle ammo
    AMMO_7_62x54 = 2  // Sniper ammo
};

struct AmmoItem {
    AmmoType type;
    std::string name;
    int price;
    int quantity;
    
    static AmmoItem* create(AmmoType type);
};
```

### Новые методы:

1. **Weapon::getAmmoType()** - возвращает тип патронов для оружия
2. **processAmmoPurchase()** - обрабатывает покупку патронов
3. Обновлен **renderShopUI()** - добавлена 4-я колонка с патронами

### Изменения в файлах:

1. **Zero_Ground/Zero_Ground.cpp** (сервер):
   - Добавлены AmmoType и AmmoItem
   - Добавлен метод Weapon::getAmmoType()
   - Добавлена функция processAmmoPurchase()
   - Обновлен renderShopUI() для 4 колонок
   - Добавлена обработка кликов по патронам

2. **Zero_Ground_client/Zero_Ground_client.cpp** (клиент):
   - Аналогичные изменения как на сервере

## Использование

1. Откройте магазин клавишей **B** рядом с красным квадратом магазина
2. Перейдите в колонку **Ammo** (4-я колонка справа)
3. Выберите нужный тип патронов
4. Кликните по панели патронов для покупки
5. Патроны автоматически добавятся ко всем оружиям соответствующего типа

## Примеры

### Пример 1: Покупка пистолетных патронов
- У игрока есть Glock-18 с 5/20 патронами
- Игрок покупает "Bullets 9x18" за $100
- Резервный боезапас Glock-18 увеличивается на 10 патронов (5/30)

### Пример 2: Покупка автоматных патронов
- У игрока есть AK-47 (25/100) и M4 (30/120)
- Игрок покупает "Bullets 5,45x39" за $150
- AK-47: 25/130, M4: 30/150

### Пример 3: Попытка купить без оружия
- У игрока нет снайперских винтовок
- При попытке купить "Bullets 7,62x54" появляется сообщение "No compatible weapon"
- Покупка не происходит

## Ограничения

1. Патроны одного типа подходят ТОЛЬКО для оружия соответствующего типа
2. Нельзя купить патроны, если нет подходящего оружия
3. Патроны добавляются в резервный боезапас, а не в магазин
4. Максимальный резервный боезапас не ограничен

## Баланс

Цены подобраны с учетом:
- Пистолетные патроны - самые дешевые ($10 за патрон)
- Автоматные патроны - средняя цена ($5 за патрон)
- Снайперские патроны - самые дорогие ($40 за патрон)

Это отражает мощность и эффективность оружия каждого типа.
