# Инструкция по тестированию автоматической стрельбы

## Подготовка

1. Скомпилировать клиент и сервер:
   ```
   .\compile_client.bat
   .\compile_server.bat
   ```

2. Запустить сервер:
   ```
   .\Zero_Ground\Debug\Zero_Ground.exe
   ```

3. Запустить клиент:
   ```
   .\Zero_Ground_client\Debug\Zero_Ground_client.exe
   ```

## Тестирование

### Шаг 1: Подключение
1. В клиенте ввести IP сервера (по умолчанию 127.0.0.1)
2. Нажать "CONNECT TO THE SERVER"
3. Нажать "READY"
4. На сервере нажать "PLAY"

### Шаг 2: Покупка автомата
1. Подойти к красному квадрату (магазин) на расстояние ~60 пикселей
2. Нажать клавишу **B** для открытия магазина
3. Выбрать один из автоматов:
   - **Galil AR** - $10,000
   - **M4** - $15,000
   - **AK-47** - $17,500
4. Кликнуть на оружие для покупки
5. Нажать **B** для закрытия магазина

### Шаг 3: Выбор оружия
1. Нажать клавишу **1**, **2**, **3** или **4** для выбора слота с автоматом
2. В правом верхнем углу должно отобразиться название оружия и патроны

### Шаг 4: Тестирование автоматической стрельбы

#### Тест 1: Одиночный выстрел
1. Кликнуть ЛКМ один раз
2. **Ожидаемый результат**: Один выстрел, патронов стало меньше на 1

#### Тест 2: Очередь
1. Зажать ЛКМ на 2-3 секунды
2. **Ожидаемый результат**: 
   - Непрерывная стрельба со скоростью ~10 выстрелов/сек
   - Патроны расходуются автоматически
   - Белые линии (пули) летят в направлении курсора

#### Тест 3: Автоматическая перезарядка
1. Зажать ЛКМ до полного опустошения магазина
2. **Ожидаемый результат**:
   - Стрельба прекращается
   - Появляется надпись "Reloading..." в правом верхнем углу
   - После перезарядки патроны восстанавливаются из резерва

#### Тест 4: Пистолеты (контрольный тест)
1. Выбрать пистолет (USP, Glock, Five-SeveN, R8)
2. Зажать ЛКМ
3. **Ожидаемый результат**: 
   - Стрельба НЕ происходит автоматически
   - Нужно кликать для каждого выстрела

### Шаг 5: Тестирование на сервере
Повторить все тесты на серверной стороне (зеленый круг).

## Ожидаемые результаты

### ✅ Успешный тест
- Автоматы стреляют очередью при зажатии ЛКМ
- Скорострельность ~10 выстрелов в секунду (интервал 100 мс)
- Пистолеты стреляют только одиночными выстрелами
- Автоматическая перезарядка работает
- Стрельба не работает при открытом магазине (B) или инвентаре (E)
- Пули синхронизируются между клиентом и сервером

### ❌ Возможные проблемы

#### Проблема: Стрельба не работает
- Проверить, что оружие выбрано (клавиши 1-4)
- Проверить, что есть патроны
- Проверить, что не открыт магазин или инвентарь

#### Проблема: Слишком быстрая/медленная стрельба
- Проверить значение `fireRate` в коде (должно быть 10.0f)
- Проверить FPS игры (должно быть ~60)

#### Проблема: Пистолеты стреляют автоматически
- Проверить, что `fireRate = 0.0f` для пистолетов
- Проверить метод `isAutomatic()`

## Дополнительные проверки

### Проверка лимита пуль
1. Зажать ЛКМ на длительное время
2. Проверить в консоли сообщение "Bullet limit reached (20)"
3. **Ожидаемый результат**: Максимум 20 активных пуль на игрока

### Проверка синхронизации
1. Запустить два клиента
2. Стрелять из автомата на одном клиенте
3. **Ожидаемый результат**: Пули видны на обоих клиентах

## Логи

При тестировании в консоли должны появляться сообщения:
- `"Shot packet sent to server"` - выстрел отправлен
- `"Fired [Weapon Name] - Ammo: X/Y"` - выстрел произведен
- `"Automatic reload triggered for [Weapon Name]"` - началась перезарядка
- `"Bullet created! Total bullets: X"` - пуля создана

## Известные ограничения

1. Автоматическая стрельба работает только для автоматов (Galil, M4, AK47)
2. Скорострельность фиксирована на 10 выстрелов/сек
3. Стрельба блокируется при открытом UI (магазин, инвентарь)
4. Максимум 20 активных пуль на игрока
