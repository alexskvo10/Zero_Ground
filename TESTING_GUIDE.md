# Руководство по тестированию системы проникновения пуль

## Быстрый старт

### 1. Компиляция

**Сервер:**
```batch
compile_server.bat
```

**Клиент:**
```batch
compile_client.bat
```

### 2. Запуск

**Сервер (запустить первым):**
```batch
cd Zero_Ground\Debug
Zero_Ground.exe
```

**Клиент:**
```batch
cd Zero_Ground_client\Debug
Zero_Ground_client.exe
```

## Что тестировать

### Тест 1: Пули останавливаются на бетоне ✅

1. Найдите на карте **серую стену** (бетон)
2. Встаньте перед ней
3. Выстрелите в стену (левая кнопка мыши)
4. **Ожидаемый результат:** Пуля исчезает при столкновении со стеной

### Тест 2: Пули проходят через дерево ✅

1. Найдите на карте **коричневую стену** (дерево)
2. Встаньте перед ней
3. Выстрелите в стену (левая кнопка мыши)
4. **Ожидаемый результат:** Пуля проходит сквозь стену и продолжает полёт

### Тест 3: Стрельба через дерево по противнику ✅

1. Расположите противника за **деревянной стеной**
2. Выстрелите в направлении противника через стену
3. **Ожидаемый результат:** Пуля проходит через стену и наносит урон противнику

### Тест 4: Защита за бетоном ✅

1. Расположите противника за **бетонной стеной**
2. Выстрелите в направлении противника
3. **Ожидаемый результат:** Пуля останавливается на стене, противник не получает урон

## Визуальные подсказки

### Как отличить типы стен:

**Бетонная стена:**
- Цвет: Светло-серый
- RGB: (150, 150, 150)
- Поведение: Непроницаема для пуль

**Деревянная стена:**
- Цвет: Коричневый
- RGB: (139, 90, 43)
- Поведение: Проницаема для пуль

## Отладочная информация

### Логи клиента

При выстреле вы увидите:
```
[INFO] Bullet created! Total bullets: X
```

При попадании в игрока:
```
[INFO] Client player hit! Damage: X, Health: Y -> Z
```

### Логи сервера

При получении выстрела:
```
[INFO] Received shot packet! Owner: X
[INFO] Bullet added from server! Total bullets: X
```

## Проверка производительности

### Метрики для мониторинга:

1. **FPS (кадры в секунду)**
   - Целевое значение: 55+
   - Отображается в консоли каждую секунду

2. **Количество активных пуль**
   - Максимум: 20 на игрока
   - Логируется каждые 2 секунды

3. **Frame Time (время кадра)**
   - Целевое значение: < 16.67ms
   - Отображается в метриках производительности

### Ожидаемая производительность:

```
=== CLIENT PERFORMANCE METRICS ===
FPS: 60 (target: 55+)
Frame Time: 16.5ms
Players: 2
Walls: ~2000
Game Thread Load: 99% of frame budget
Estimated CPU Usage: 39% (target: <40%)
====================================
```

## Известные проблемы и решения

### Проблема: Пули не отображаются

**Решение:**
- Проверьте, что сервер запущен
- Убедитесь, что UDP-соединение установлено
- Проверьте логи на наличие ошибок сети

### Проблема: Пули проходят через все стены

**Решение:**
- Убедитесь, что используется новая версия кода
- Проверьте, что метод `checkCellWallCollision()` вызывается
- Проверьте логи на наличие ошибок

### Проблема: Низкий FPS

**Решение:**
- Используйте Release-сборку вместо Debug
- Закройте другие приложения
- Проверьте, что не запущено несколько экземпляров игры

## Расширенное тестирование

### Тест 5: Множественные стены

1. Найдите участок с несколькими стенами подряд
2. Стреляйте через комбинацию дерево-бетон-дерево
3. **Ожидаемый результат:** Пуля останавливается на первой бетонной стене

### Тест 6: Угловые выстрелы

1. Стреляйте под углом в деревянную стену
2. Наблюдайте траекторию пули после прохождения
3. **Ожидаемый результат:** Пуля сохраняет направление после прохождения

### Тест 7: Дальность стрельбы

1. Стреляйте через деревянную стену на максимальную дальность
2. Проверьте, что пуля исчезает после исчерпания дальности
3. **Ожидаемый результат:** Пуля исчезает согласно параметру `range` оружия

## Контрольный список тестирования

- [ ] Пули останавливаются на бетонных стенах
- [ ] Пули проходят через деревянные стены
- [ ] Урон наносится через деревянные стены
- [ ] Урон не наносится через бетонные стены
- [ ] FPS остаётся выше 55
- [ ] Нет утечек памяти (количество пуль не растёт бесконечно)
- [ ] Сетевая синхронизация работает корректно
- [ ] Визуальное отображение пуль корректно
- [ ] Звуковые эффекты работают (если реализованы)
- [ ] Нет вылетов или зависаний

## Отчёт о тестировании

После тестирования заполните:

**Дата:** _______________
**Тестировщик:** _______________
**Версия:** _______________

**Результаты:**
- Тест 1 (Бетон): ☐ Пройден ☐ Не пройден
- Тест 2 (Дерево): ☐ Пройден ☐ Не пройден
- Тест 3 (Урон через дерево): ☐ Пройден ☐ Не пройден
- Тест 4 (Защита бетоном): ☐ Пройден ☐ Не пройден
- Производительность: ☐ Приемлемая ☐ Требует оптимизации

**Комментарии:**
_________________________________________________________________
_________________________________________________________________
_________________________________________________________________

## Контакты для сообщения об ошибках

При обнаружении проблем создайте issue с описанием:
1. Шаги для воспроизведения
2. Ожидаемое поведение
3. Фактическое поведение
4. Скриншоты/видео (если возможно)
5. Логи из консоли
