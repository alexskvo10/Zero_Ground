╔═══════════════════════════════════════════════════════════════════════════════╗
║                        СИСТЕМА ПОКУПКИ ПАТРОНОВ                               ║
║                           Zero Ground Multiplayer                             ║
╚═══════════════════════════════════════════════════════════════════════════════╝

┌─────────────────────────────────────────────────────────────────────────────┐
│                            ТИПЫ ПАТРОНОВ                                     │
└─────────────────────────────────────────────────────────────────────────────┘

    ┌──────────────────┐      ┌──────────────────┐      ┌──────────────────┐
    │  Bullets 9x18    │      │ Bullets 5,45x39  │      │ Bullets 7,62x54  │
    │  (Пистолетные)   │      │  (Автоматные)    │      │  (Снайперские)   │
    ├──────────────────┤      ├──────────────────┤      ├──────────────────┤
    │ Цена: $100       │      │ Цена: $150       │      │ Цена: $200       │
    │ Кол-во: 10 шт    │      │ Кол-во: 30 шт    │      │ Кол-во: 5 шт     │
    └────────┬─────────┘      └────────┬─────────┘      └────────┬─────────┘
             │                         │                         │
             ▼                         ▼                         ▼
    ┌──────────────────┐      ┌──────────────────┐      ┌──────────────────┐
    │ USP              │      │ Galil AR         │      │ M10              │
    │ Glock-18         │      │ M4               │      │ AWP              │
    │ Five-SeveN       │      │ AK-47            │      │ M40              │
    │ R8 Revolver      │      │                  │      │                  │
    └──────────────────┘      └──────────────────┘      └──────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                        ИНТЕРФЕЙС МАГАЗИНА                                    │
└─────────────────────────────────────────────────────────────────────────────┘

    ╔═══════════════════════════════════════════════════════════════════╗
    ║                        WEAPON SHOP                                ║
    ║                     Money: $50,000                                ║
    ╠═══════════════════════════════════════════════════════════════════╣
    ║                                                                   ║
    ║  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐            ║
    ║  │ Pistols │  │ Rifles  │  │ Snipers │  │  Ammo   │ ◄── НОВОЕ  ║
    ║  ├─────────┤  ├─────────┤  ├─────────┤  ├─────────┤            ║
    ║  │ USP     │  │ Galil   │  │ M10     │  │ 9x18    │            ║
    ║  │ $0      │  │ $10,000 │  │ $20,000 │  │ $100    │            ║
    ║  ├─────────┤  ├─────────┤  ├─────────┤  │ Qty: 10 │            ║
    ║  │ Glock   │  │ M4      │  │ AWP     │  ├─────────┤            ║
    ║  │ $1,000  │  │ $15,000 │  │ $25,000 │  │ 5.45x39 │            ║
    ║  ├─────────┤  ├─────────┤  ├─────────┤  │ $150    │            ║
    ║  │ Five-7  │  │ AK-47   │  │ M40     │  │ Qty: 30 │            ║
    ║  │ $2,500  │  │ $17,500 │  │ $22,000 │  ├─────────┤            ║
    ║  ├─────────┤  └─────────┘  └─────────┘  │ 7.62x54 │            ║
    ║  │ R8      │                             │ $200    │            ║
    ║  │ $4,250  │                             │ Qty: 5  │            ║
    ║  └─────────┘                             └─────────┘            ║
    ║                                                                   ║
    ╚═══════════════════════════════════════════════════════════════════╝

┌─────────────────────────────────────────────────────────────────────────────┐
│                        ЛОГИКА ПОКУПКИ                                        │
└─────────────────────────────────────────────────────────────────────────────┘

    Игрок кликает на патроны
            │
            ▼
    ┌───────────────────┐
    │ Проверка денег    │ ──► Недостаточно? ──► ❌ "Insufficient funds"
    └─────────┬─────────┘
              │ Достаточно
              ▼
    ┌───────────────────┐
    │ Проверка оружия   │ ──► Нет оружия? ──► ❌ "No compatible weapon"
    └─────────┬─────────┘
              │ Есть оружие
              ▼
    ┌───────────────────┐
    │ Списание денег    │
    └─────────┬─────────┘
              │
              ▼
    ┌───────────────────┐
    │ Добавление патрон │ ──► Ко ВСЕМ оружиям этого типа
    └─────────┬─────────┘
              │
              ▼
    ┌───────────────────┐
    │ Уведомление       │ ──► ✅ "Purchased Bullets 9x18"
    └───────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                    ПРИМЕР ИСПОЛЬЗОВАНИЯ                                      │
└─────────────────────────────────────────────────────────────────────────────┘

    НАЧАЛЬНОЕ СОСТОЯНИЕ:
    ┌──────────────────────────────────────┐
    │ Инвентарь:                           │
    │  Slot 1: Glock-18  [20/120]         │
    │  Slot 2: Five-SeveN [20/100]        │
    │  Slot 3: Empty                       │
    │  Slot 4: Empty                       │
    │                                      │
    │ Деньги: $50,000                      │
    └──────────────────────────────────────┘
                    │
                    │ Покупка "Bullets 9x18" ($100, 10 шт)
                    ▼
    ┌──────────────────────────────────────┐
    │ Инвентарь:                           │
    │  Slot 1: Glock-18  [20/130] ◄─┐     │
    │  Slot 2: Five-SeveN [20/110] ◄─┤     │
    │  Slot 3: Empty                 │     │
    │  Slot 4: Empty                 │     │
    │                                │     │
    │ Деньги: $49,900                │     │
    │                                │     │
    │ +10 патронов к каждому ────────┘     │
    └──────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                        СТАТУСЫ ПОКУПКИ                                       │
└─────────────────────────────────────────────────────────────────────────────┘

    ┌─────────────────────┐
    │ ✅ Can purchase     │ ◄── Зеленый: Есть деньги и оружие
    └─────────────────────┘

    ┌─────────────────────┐
    │ ❌ Insufficient     │ ◄── Красный: Недостаточно денег
    │    funds            │
    └─────────────────────┘

    ┌─────────────────────┐
    │ ❌ No compatible    │ ◄── Красный: Нет подходящего оружия
    │    weapon           │
    └─────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                        АРХИТЕКТУРА КОДА                                      │
└─────────────────────────────────────────────────────────────────────────────┘

    ┌──────────────────────────────────────────────────────────────┐
    │                      AmmoType (enum)                         │
    ├──────────────────────────────────────────────────────────────┤
    │ + AMMO_9x18      : uint8_t = 0                               │
    │ + AMMO_5_45x39   : uint8_t = 1                               │
    │ + AMMO_7_62x54   : uint8_t = 2                               │
    └──────────────────────────────────────────────────────────────┘
                                │
                                │ используется в
                                ▼
    ┌──────────────────────────────────────────────────────────────┐
    │                      AmmoItem (struct)                       │
    ├──────────────────────────────────────────────────────────────┤
    │ + type      : AmmoType                                       │
    │ + name      : string                                         │
    │ + price     : int                                            │
    │ + quantity  : int                                            │
    ├──────────────────────────────────────────────────────────────┤
    │ + create(type: AmmoType) : AmmoItem*  [static]               │
    └──────────────────────────────────────────────────────────────┘
                                │
                                │ используется в
                                ▼
    ┌──────────────────────────────────────────────────────────────┐
    │                      Weapon (struct)                         │
    ├──────────────────────────────────────────────────────────────┤
    │ + type           : Type                                      │
    │ + currentAmmo    : int                                       │
    │ + reserveAmmo    : int                                       │
    │ + ...                                                        │
    ├──────────────────────────────────────────────────────────────┤
    │ + getAmmoType() : AmmoType  [NEW]                            │
    │ + create(type: Type) : Weapon*                               │
    └──────────────────────────────────────────────────────────────┘
                                │
                                │ используется в
                                ▼
    ┌──────────────────────────────────────────────────────────────┐
    │                      Player (struct)                         │
    ├──────────────────────────────────────────────────────────────┤
    │ + inventory[4]   : Weapon*                                   │
    │ + money          : int                                       │
    │ + ...                                                        │
    └──────────────────────────────────────────────────────────────┘
                                │
                                │ используется в
                                ▼
    ┌──────────────────────────────────────────────────────────────┐
    │              processAmmoPurchase() [NEW]                     │
    ├──────────────────────────────────────────────────────────────┤
    │ 1. Проверка денег                                            │
    │ 2. Проверка совместимого оружия                              │
    │ 3. Списание денег                                            │
    │ 4. Добавление патронов ко всем оружиям типа                  │
    │ 5. Возврат результата                                        │
    └──────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                        БАЛАНС СИСТЕМЫ                                        │
└─────────────────────────────────────────────────────────────────────────────┘

    Стоимость за патрон:
    
    Пистолетные:  $100 / 10 = $10/патрон  ◄── Самые дешевые
    Автоматные:   $150 / 30 = $5/патрон   ◄── Средняя цена
    Снайперские:  $200 / 5  = $40/патрон  ◄── Самые дорогие
    
    Соотношение цен: 1 : 0.5 : 4
    
    Это отражает:
    - Урон оружия
    - Скорострельность
    - Эффективность на дистанции
    - Сложность использования

╔═══════════════════════════════════════════════════════════════════════════════╗
║                              КОНЕЦ ДИАГРАММЫ                                  ║
╚═══════════════════════════════════════════════════════════════════════════════╝
