# Руководство по тестированию системы покупки патронов

## Подготовка к тестированию

1. Скомпилируйте сервер и клиент:
   ```
   compile_server.bat
   compile_client.bat
   ```

2. Запустите сервер (Zero_Ground.exe)
3. Запустите клиент (Zero_Ground_client.exe)
4. Подключитесь к серверу и начните игру

## Тестовые сценарии

### Сценарий 1: Базовая покупка патронов

**Цель**: Проверить, что патроны можно купить и они добавляются к оружию

**Шаги**:
1. Начните игру с USP (стартовое оружие)
2. Проверьте текущий боезапас (например, 12/100)
3. Подойдите к магазину (красный квадрат)
4. Нажмите **B** для открытия магазина
5. Перейдите в колонку **Ammo** (4-я колонка)
6. Найдите "Bullets 9x18" (цена $100, количество 10)
7. Кликните по панели патронов
8. Проверьте, что:
   - Деньги уменьшились на $100
   - Резервный боезапас USP увеличился на 10 (12/110)
   - Появилось уведомление о покупке

**Ожидаемый результат**: ✅ Патроны куплены, боезапас увеличен

---

### Сценарий 2: Покупка патронов для нескольких оружий

**Цель**: Проверить, что патроны добавляются ко всем оружиям одного типа

**Шаги**:
1. Купите Glock-18 в магазине ($1000)
2. Купите Five-SeveN в магазине ($2500)
3. Проверьте боезапас обоих пистолетов
4. Купите "Bullets 9x18" за $100
5. Проверьте боезапас обоих пистолетов

**Ожидаемый результат**: ✅ Оба пистолета получили +10 патронов в резерв

---

### Сценарий 3: Попытка купить без оружия

**Цель**: Проверить, что нельзя купить патроны без подходящего оружия

**Шаги**:
1. Начните игру с USP (только пистолет)
2. Откройте магазин
3. Попробуйте купить "Bullets 5,45x39" (автоматные)
4. Проверьте статус покупки

**Ожидаемый результат**: ✅ Статус "No compatible weapon" (красный), покупка невозможна

---

### Сценарий 4: Попытка купить без денег

**Цель**: Проверить, что нельзя купить патроны без достаточных средств

**Шаги**:
1. Потратьте все деньги на оружие
2. Попробуйте купить патроны
3. Проверьте статус покупки

**Ожидаемый результат**: ✅ Статус "Insufficient funds" (красный), покупка невозможна

---

### Сценарий 5: Покупка разных типов патронов

**Цель**: Проверить, что разные типы патронов работают корректно

**Шаги**:
1. Купите по одному оружию каждого типа:
   - Glock-18 (пистолет)
   - Galil AR (автомат)
   - M10 (снайперка)
2. Купите патроны для каждого типа:
   - "Bullets 9x18" ($100, 10 шт)
   - "Bullets 5,45x39" ($150, 30 шт)
   - "Bullets 7,62x54" ($200, 5 шт)
3. Проверьте боезапас каждого оружия

**Ожидаемый результат**: 
- ✅ Glock-18: +10 патронов
- ✅ Galil AR: +30 патронов
- ✅ M10: +5 патронов

---

### Сценарий 6: Визуальная проверка UI

**Цель**: Проверить корректность отображения магазина

**Шаги**:
1. Откройте магазин
2. Проверьте наличие 4 колонок:
   - Pistols
   - Rifles
   - Snipers
   - Ammo (новая)
3. Проверьте отображение патронов в колонке Ammo:
   - Название
   - Цена
   - Количество
   - Статус покупки (цвет)

**Ожидаемый результат**: ✅ Все элементы отображаются корректно

---

### Сценарий 7: Использование купленных патронов

**Цель**: Проверить, что купленные патроны можно использовать

**Шаги**:
1. Купите Glock-18
2. Купите "Bullets 9x18" (2-3 раза)
3. Стреляйте до опустошения магазина
4. Нажмите **R** для перезарядки
5. Повторите несколько раз

**Ожидаемый результат**: ✅ Патроны расходуются из резерва при перезарядке

---

## Проверка логов

После каждой покупки проверьте консоль на наличие сообщений:
```
[AMMO PURCHASE] Player purchased Bullets 9x18 (10 rounds) for $100. New balance: $49900
```

## Известные ограничения

1. Патроны добавляются только в резервный боезапас, не в магазин
2. Максимальный резервный боезапас не ограничен
3. Патроны одного типа подходят ТОЛЬКО для оружия соответствующего типа

## Отчет о багах

Если обнаружите проблемы, запишите:
1. Шаги для воспроизведения
2. Ожидаемое поведение
3. Фактическое поведение
4. Скриншоты (если применимо)
5. Логи из консоли
